local modules = {
    ["arqad-hive-mk01"] = {
        "arqad"
    },
    ["arqad-hive-mk02"] = {
        "arqad"
    },
    ["arqad-hive-mk03"] = {
        "arqad"
    },
    ["arqad-hive-mk04"] = {
        "arqad"
    },
    ["arthurian-pen-mk01"] = {
        "arthurian"
    },
    ["arthurian-pen-mk02"] = {
        "arthurian"
    },
    ["arthurian-pen-mk03"] = {
        "arthurian"
    },
    ["arthurian-pen-mk04"] = {
        "arthurian"
    },
    ["auog-paddock-mk01"] = {
        "auog"
    },
    ["auog-paddock-mk02"] = {
        "auog"
    },
    ["auog-paddock-mk03"] = {
        "auog"
    },
    ["auog-paddock-mk04"] = {
        "auog"
    },
    ["bhoddos-culture-mk01"] = {
        "bhoddos"
    },
    ["bhoddos-culture-mk02"] = {
        "bhoddos"
    },
    ["bhoddos-culture-mk03"] = {
        "bhoddos"
    },
    ["bhoddos-culture-mk04"] = {
        "bhoddos"
    },
    ["cridren-enclosure-mk01"] = {
        "cridren"
    },
    ["cridren-enclosure-mk02"] = {
        "cridren"
    },
    ["cridren-enclosure-mk03"] = {
        "cridren"
    },
    ["cridren-enclosure-mk04"] = {
        "cridren"
    },
    ["dhilmos-pool-mk01"] = {
        "dhilmos"
    },
    ["dhilmos-pool-mk02"] = {
        "dhilmos"
    },
    ["dhilmos-pool-mk03"] = {
        "dhilmos"
    },
    ["dhilmos-pool-mk04"] = {
        "dhilmos"
    },
    ["dingrits-pack-mk01"] = {
        "dingrits"
    },
    ["dingrits-pack-mk02"] = {
        "dingrits"
    },
    ["dingrits-pack-mk03"] = {
        "dingrits"
    },
    ["dingrits-pack-mk04"] = {
        "dingrits"
    },
    ["ez-ranch-mk01"] = {
        "korlex"
    },
    ["ez-ranch-mk02"] = {
        "korlex"
    },
    ["ez-ranch-mk03"] = {
        "korlex"
    },
    ["ez-ranch-mk04"] = {
        "korlex"
    },
    ["fawogae-plantation-mk01"] = {
        "fawogae"
    },
    ["fawogae-plantation-mk02"] = {
        "fawogae"
    },
    ["fawogae-plantation-mk03"] = {
        "fawogae"
    },
    ["fawogae-plantation-mk04"] = {
        "fawogae"
    },
    ["fish-farm-mk01"] = {
        "fish"
    },
    ["fish-farm-mk02"] = {
        "fish"
    },
    ["fish-farm-mk03"] = {
        "fish"
    },
    ["fish-farm-mk04"] = {
        "fish"
    },
    ["fwf-mk01"] = {
        "tree"
    },
    ["fwf-mk02"] = {
        "tree"
    },
    ["fwf-mk03"] = {
        "tree"
    },
    ["fwf-mk04"] = {
        "tree"
    },
    ["grods-swamp-mk01"] = {
        "grod"
    },
    ["grods-swamp-mk02"] = {
        "grod"
    },
    ["grods-swamp-mk03"] = {
        "grod"
    },
    ["grods-swamp-mk04"] = {
        "grod"
    },
    ["guar-gum-plantation"] = {
        "guar"
    },
    ["guar-gum-plantation-mk02"] = {
        "guar"
    },
    ["guar-gum-plantation-mk03"] = {
        "guar"
    },
    ["guar-gum-plantation-mk04"] = {
        "guar"
    },
    ["kmauts-enclosure-mk01"] = {
        "kmauts"
    },
    ["kmauts-enclosure-mk02"] = {
        "kmauts"
    },
    ["kmauts-enclosure-mk03"] = {
        "kmauts"
    },
    ["kmauts-enclosure-mk04"] = {
        "kmauts"
    },
    ["moss-farm-mk01"] = {
        "moss"
    },
    ["moss-farm-mk02"] = {
        "moss"
    },
    ["moss-farm-mk03"] = {
        "moss"
    },
    ["moss-farm-mk04"] = {
        "moss"
    },
    ["mukmoux-pasture-mk01"] = {
        "mukmoux"
    },
    ["mukmoux-pasture-mk02"] = {
        "mukmoux"
    },
    ["mukmoux-pasture-mk03"] = {
        "mukmoux"
    },
    ["mukmoux-pasture-mk04"] = {
        "mukmoux"
    },
    ["navens-culture-mk01"] = {
        "navens"
    },
    ["navens-culture-mk02"] = {
        "navens"
    },
    ["navens-culture-mk03"] = {
        "navens"
    },
    ["navens-culture-mk04"] = {
        "navens"
    },
    ["phadai-enclosure-mk01"] = {
        "phadai"
    },
    ["phadai-enclosure-mk02"] = {
        "phadai"
    },
    ["phadai-enclosure-mk03"] = {
        "phadai"
    },
    ["phadai-enclosure-mk04"] = {
        "phadai"
    },
    ["phagnot-corral-mk01"] = {
        "phagnot"
    },
    ["phagnot-corral-mk02"] = {
        "phagnot"
    },
    ["phagnot-corral-mk03"] = {
        "phagnot"
    },
    ["phagnot-corral-mk04"] = {
        "phagnot"
    },
    ["prandium-lab-mk01"] = {
        "cottongut"
    },
    ["prandium-lab-mk02"] = {
        "cottongut"
    },
    ["prandium-lab-mk03"] = {
        "cottongut"
    },
    ["prandium-lab-mk04"] = {
        "cottongut"
    },
    ["ralesia-plantation-mk01"] = {
        "ralesia"
    },
    ["ralesia-plantation-mk02"] = {
        "ralesia"
    },
    ["ralesia-plantation-mk03"] = {
        "ralesia"
    },
    ["ralesia-plantation-mk04"] = {
        "ralesia"
    },
    ["rc-mk01"] = {
        "arqad",
        "arthurian",
        "auog",
        "cottongut",
        "dhilmos",
        "dingrits",
        "kmauts",
        "korlex",
        "mukmoux",
        "phadai",
        "phagnot",
        "scrondrix",
        "simik",
        "trits",
        "ulric",
        "vonix",
        "vrauks",
        "xeno",
        "xyhiphoe",
        "zipir",
    },
    ["rc-mk02"] = {
        "arqad",
        "arthurian",
        "auog",
        "cottongut",
        "dhilmos",
        "dingrits",
        "kmauts",
        "korlex",
        "mukmoux",
        "phadai",
        "phagnot",
        "scrondrix",
        "simik",
        "trits",
        "ulric",
        "vonix",
        "vrauks",
        "xeno",
        "xyhiphoe",
        "zipir",
    },
    ["rc-mk03"] = {
        "arqad",
        "arthurian",
        "auog",
        "cottongut",
        "dhilmos",
        "dingrits",
        "kmauts",
        "korlex",
        "mukmoux",
        "phadai",
        "phagnot",
        "scrondrix",
        "simik",
        "trits",
        "ulric",
        "vonix",
        "vrauks",
        "xeno",
        "xyhiphoe",
        "zipir",
    },
    ["rc-mk04"] = {
        "arqad",
        "arthurian",
        "auog",
        "cottongut",
        "dhilmos",
        "dingrits",
        "kmauts",
        "korlex",
        "mukmoux",
        "phadai",
        "phagnot",
        "scrondrix",
        "simik",
        "trits",
        "ulric",
        "vonix",
        "vrauks",
        "xeno",
        "xyhiphoe",
        "zipir",
    },
    ["rennea-plantation-mk01"] = {
        "rennea"
    },
    ["rennea-plantation-mk02"] = {
        "rennea"
    },
    ["rennea-plantation-mk03"] = {
        "rennea"
    },
    ["rennea-plantation-mk04"] = {
        "rennea"
    },
    ["sap-extractor-mk01"] = {
        "sap-mk01",
        "sap-mk02",
        "sap-mk03",
        "sap-mk04",
    },
    ["sap-extractor-mk02"] = {
        "sap-mk02",
        "sap-mk03",
        "sap-mk04",
    },
    ["sap-extractor-mk03"] = {
        "sap-mk03",
        "sap-mk04",
    },
    ["sap-extractor-mk04"] = {
        "sap-mk04",
    },
    ["scrondrix-pen-mk01"] = {
        "scrondrix"
    },
    ["scrondrix-pen-mk02"] = {
        "scrondrix"
    },
    ["scrondrix-pen-mk03"] = {
        "scrondrix"
    },
    ["scrondrix-pen-mk04"] = {
        "scrondrix"
    },
    ["seaweed-crop-mk01"] = {
        "seaweed"
    },
    ["seaweed-crop-mk02"] = {
        "seaweed"
    },
    ["seaweed-crop-mk03"] = {
        "seaweed"
    },
    ["seaweed-crop-mk04"] = {
        "seaweed"
    },
    ["simik-den-mk01"] = {
        "simik"
    },
    ["simik-den-mk02"] = {
        "simik"
    },
    ["simik-den-mk03"] = {
        "simik"
    },
    ["simik-den-mk04"] = {
        "simik"
    },
    ["sponge-culture-mk01"] = {
        "sponge"
    },
    ["sponge-culture-mk02"] = {
        "sponge"
    },
    ["sponge-culture-mk03"] = {
        "sponge"
    },
    ["sponge-culture-mk04"] = {
        "sponge"
    },
    ["trits-reef-mk01"] = {
        "trits"
    },
    ["trits-reef-mk02"] = {
        "trits"
    },
    ["trits-reef-mk03"] = {
        "trits"
    },
    ["trits-reef-mk04"] = {
        "trits"
    },
    ["tuuphra-plantation-mk01"] = {
        "tuuphra"
    },
    ["tuuphra-plantation-mk02"] = {
        "tuuphra"
    },
    ["tuuphra-plantation-mk03"] = {
        "tuuphra"
    },
    ["tuuphra-plantation-mk04"] = {
        "tuuphra"
    },
    ["ulric-corral-mk01"] = {
        "ulric"
    },
    ["ulric-corral-mk02"] = {
        "ulric"
    },
    ["ulric-corral-mk03"] = {
        "ulric"
    },
    ["ulric-corral-mk04"] = {
        "ulric"
    },
    ["vonix-den-mk01"] = {
        "vonix"
    },
    ["vonix-den-mk02"] = {
        "vonix"
    },
    ["vonix-den-mk03"] = {
        "vonix"
    },
    ["vonix-den-mk04"] = {
        "vonix"
    },
    ["vrauks-paddock-mk01"] = {
        "vrauks"
    },
    ["vrauks-paddock-mk02"] = {
        "vrauks"
    },
    ["vrauks-paddock-mk03"] = {
        "vrauks"
    },
    ["vrauks-paddock-mk04"] = {
        "vrauks"
    },
    ["xenopen-mk01"] = {
        "xeno"
    },
    ["xenopen-mk02"] = {
        "xeno"
    },
    ["xenopen-mk03"] = {
        "xeno"
    },
    ["xenopen-mk04"] = {
        "xeno"
    },
    ["xyhiphoe-pool-mk01"] = {
        "xyhiphoe"
    },
    ["xyhiphoe-pool-mk02"] = {
        "xyhiphoe"
    },
    ["xyhiphoe-pool-mk03"] = {
        "xyhiphoe"
    },
    ["xyhiphoe-pool-mk04"] = {
        "xyhiphoe"
    },
    ["yaedols-culture-mk01"] = {
        "yaedols"
    },
    ["yaedols-culture-mk02"] = {
        "yaedols"
    },
    ["yaedols-culture-mk03"] = {
        "yaedols"
    },
    ["yaedols-culture-mk04"] = {
        "yaedols"
    },
    ["yotoi-aloe-orchard-mk01"] = {
        "yotoi"
    },
    ["yotoi-aloe-orchard-mk02"] = {
        "yotoi"
    },
    ["yotoi-aloe-orchard-mk03"] = {
        "yotoi"
    },
    ["yotoi-aloe-orchard-mk04"] = {
        "yotoi"
    },
    ["zipir-reef-mk01"] = {
        "zipir"
    },
    ["zipir-reef-mk02"] = {
        "zipir"
    },
    ["zipir-reef-mk03"] = {
        "zipir"
    },
    ["zipir-reef-mk04"] = {
        "zipir"
    },
}

if mods["pyhightech"] then
    modules = table.merge(modules,
        {
            ["antelope-enclosure-mk01"] = {
                "antelope"
            },
            ["cadaveric-arum-mk01"] = {
                "arum"
            },
            ["cadaveric-arum-mk02"] = {
                "arum"
            },
            ["cadaveric-arum-mk03"] = {
                "arum"
            },
            ["cadaveric-arum-mk04"] = {
                "arum"
            },
            ["kicalk-plantation-mk01"] = {
                "kicalk"
            },
            ["kicalk-plantation-mk02"] = {
                "kicalk"
            },
            ["kicalk-plantation-mk03"] = {
                "kicalk"
            },
            ["kicalk-plantation-mk04"] = {
                "kicalk"
            },
            ["moondrop-greenhouse-mk01"] = {
                "moondrop"
            },
            ["moondrop-greenhouse-mk02"] = {
                "moondrop"
            },
            ["moondrop-greenhouse-mk03"] = {
                "moondrop"
            },
            ["moondrop-greenhouse-mk04"] = {
                "moondrop"
            },
        })
    local new_modules = {}
    for i = 1, 4, 1 do
        for _, new_module in pairs(new_modules) do
            table.insert(modules["rc-mk0" .. i], new_module)
        end
    end
end

if mods["pyalternativeenergy"] then
    modules = table.merge(modules,
        {
            ["zungror-lair-mk01"] = {
                "zungror"
            },
            ["zungror-lair-mk02"] = {
                "zungror"
            },
            ["zungror-lair-mk03"] = {
                "zungror"
            },
            ["zungror-lair-mk04"] = {
                "zungror"
            },
            ["numal-reef-mk01"] = {
                "numal"
            },
            ["numal-reef-mk02"] = {
                "numal"
            },
            ["numal-reef-mk03"] = {
                "numal"
            },
            ["numal-reef-mk04"] = {
                "numal"
            }
        })
    local new_modules = {"zungror", "numal"}
    for i = 1, 4, 1 do
        for _, new_module in pairs(new_modules) do
            table.insert(modules["rc-mk0" .. i], new_module)
        end
    end
end

for building, module_categories in pairs(modules) do
    if not data.raw["assembling-machine"][building] then
        error("Building " .. building .. " not found")
    end
    data.raw["assembling-machine"][building].allowed_module_categories = module_categories
end
